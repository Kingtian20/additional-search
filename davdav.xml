<Module>
<ModulePrefs title="Google.com"/>
<Content type="html"><![CDATA[
<!DOCTYPE html>
<html lang="en-us">
<head>
<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/centerclassroom/salam@main/style.css"/>
<style>
canvas:focus { outline: none; }
html, body {
  padding: 0;
  margin: 0;
  overflow: hidden;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  -webkit-tap-highlight-color: rgba(0,0,0,0);
  height: 100%;
}
</style>
</head>
<body class="dark">
<div id="unity-container" class="unity-desktop">
  <canvas id="unity-canvas" tabindex="-1"></canvas>
</div>
<div id="loading-cover" style="display:none;">
  <div id="unity-loading-bar">
    <div id="unity-logo">
      <img src="https://cdn.jsdelivr.net/gh/centerclassroom/salam@main/logo.png"/>
    </div>
    <div id="unity-progress-bar-empty" style="display: none;">
      <div id="unity-progress-bar-full"></div>
    </div>
    <div class="spinner"></div>
  </div>
</div>

<script>
const hideFullScreenButton = "";
const buildUrl = "https://cdn.jsdelivr.net/gh/centerclassroom/salam@main/Build";
const loaderUrl = buildUrl + "/Build.loader.js";
const config = {
  dataUrl: buildUrl + "/Build.data.unityweb",
  frameworkUrl: buildUrl + "/Build.framework.js.unityweb",
  codeUrl: buildUrl + "/Build.wasm.unityweb",
  streamingAssetsUrl: "StreamingAssets",
  companyName: "Chicken",
  productName: "Chicken",
  productVersion: "1.0.2"
};

const container = document.querySelector("#unity-container");
const canvas = document.querySelector("#unity-canvas");
const loadingCover = document.querySelector("#loading-cover");
const progressBarEmpty = document.querySelector("#unity-progress-bar-empty");
const progressBarFull = document.querySelector("#unity-progress-bar-full");
const spinner = document.querySelector('.spinner');

if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
  container.className = "unity-mobile";
}

// Removed the starting background image line
canvas.style.background = "black"; // You can change this color if you want
loadingCover.style.display = "";

document.addEventListener('contextmenu', event => event.preventDefault());

function FocusGame() {
  window.focus();
  canvas.focus();
}

window.addEventListener('pointerdown', FocusGame);
window.addEventListener('touchstart', FocusGame);

let StartUnityInstance;
let myGameInstance;
let initGame = false;
let nowFullAdOpen = false;

try {
  const script = document.createElement("script");
  script.src = loaderUrl;
  script.onload = () => {
    StartUnityInstance = function () {
      createUnityInstance(canvas, config, (progress) => {
        spinner.style.display = "none";
        progressBarEmpty.style.display = "";
        progressBarFull.style.width = `${100 * progress}%`;
      }).then((unityInstance) => {
        myGameInstance = unityInstance;
        loadingCover.style.display = "none";
      }).catch((message) => {
        console.error("Unity yükleme hatası:", message);
      });
    };
    StartUnityInstance();
  };
  document.body.appendChild(script);
} catch (error) {
  console.error("Başlatma sırasında hata:", error);
}

function InitGame() {
  try {
    console.log('Init Game Success');
    initGame = true;
    if (nowFullAdOpen === true && myGameInstance != null) {
      myGameInstance.SendMessage('YandexGame', 'OpenFullAd');
    }
  } catch (error) {
    console.error("InitGame sırasında hata:", error);
  }
}
</script>

<!-- GOOGLE AD CODE -->
<style>
#ad-container {
  position: fixed;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: min(728px, calc(100% - 20px));
  height: 90px;
  background: rgba(0, 0, 0, 0.90);
  display: none;
  z-index: 99999;
  overflow: hidden;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.45);
  box-sizing: border-box;
  transition: transform 0.5s ease-in-out;
}
#ad-container.hidden { transform: translate(-50%, -100%); }
#ad-iframe {
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 745px;
  height: 90px;
  border: 0;
  display: block;
}
#close-ad {
  position: absolute;
  top: 6px;
  right: 8px;
  background: #ff4d4d;
  color: #fff;
  border: none;
  padding: 5px 9px;
  font-size: 13px;
  border-radius: 4px;
  cursor: not-allowed;
  opacity: 0.72;
  z-index: 100000;
}
#close-ad.enabled { cursor: pointer; opacity: 1; }
#close-ad::before { content: '↑'; margin-right: 4px; }
</style>

<div id="ad-container" aria-hidden="true">
  <iframe id="ad-iframe" src="https://script.google.com/macros/s/AKfycbzA6GNdpfUShkCh6apD0D21YAUf7A5d3Guhq2PayqLbk_5XG_wQhy0bdYzKJWLhzgMVMQ/exec"
    width="768px" height="95px" scrolling="no" frameborder="0"
    sandbox="allow-scripts allow-popups allow-same-origin"></iframe>
  <button id="close-ad" disabled>Close (12)</button>
</div>

<script>
(function () {
  const showDelay = 2000;
  const countdownStart = 12;
  const reappearDelay = 25000;
  const adContainer = document.getElementById('ad-container');
  const closeBtn = document.getElementById('close-ad');

  function showAd() {
    adContainer.style.display = 'block';
    adContainer.classList.remove('hidden');
    adContainer.setAttribute('aria-hidden', 'false');
    let timeLeft = countdownStart;
    closeBtn.textContent = `Close (${timeLeft})`;
    closeBtn.disabled = true;
    closeBtn.classList.remove('enabled');
    const t = setInterval(() => {
      timeLeft--;
      if (timeLeft > 0) {
        closeBtn.textContent = `Close (${timeLeft})`;
      } else {
        clearInterval(t);
        closeBtn.disabled = false;
        closeBtn.classList.add('enabled');
        closeBtn.textContent = 'Close ↑';
      }
    }, 1000);
  }

  setTimeout(showAd, showDelay);

  closeBtn.addEventListener('click', () => {
    if (closeBtn.disabled) return;
    adContainer.classList.add('hidden');
    adContainer.setAttribute('aria-hidden', 'true');
    setTimeout(showAd, reappearDelay);
  });
})();
</script>
</body>
</html>
]]></Content>
</Module>
